# apiVersion: helm.toolkit.fluxcd.io/v2
# kind: HelmRelease
# metadata:
#   name: metube
#   namespace: default

# spec:
#   interval: 5m
#   releaseName: metube

#   chart:
#     spec:
#       chart: unichart
#       version: "0.0.4"
#       sourceRef:
#         kind: HelmRepository
#         name: tinycloud-labs
#         namespace: flux-system
#       interval: 1m

#   values:
#     app:
#       name: metube
#       image:
#         repository: ghcr.io/alexta69/metube
#         tag: latest
#         pullPolicy: IfNotPresent

#       replicaCount: 1

#       containerPort: 80

#       service:
#         port: 80
#         targetPort: 8081

#       volumeMounts:
#         - mountPath: /downloads
#           subPath: downloads

#     ingress:
#       enabled: true
#       host: metube.shakir.cloud
#       ingressClassName: nginx

#     persistence:
#       enabled: true
#       # name: metube-unichart
#       size: 200Mi
#       accessMode: ReadWriteMany
#       reclaimPolicy: Retain
#       nfs:
#         server: nas.shakir.cloud
#         path: /volume1/k3s-main/metube
